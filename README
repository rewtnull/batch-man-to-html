NAME
        bm2h - Batch man to html

VERSION
        0.7

SYNOPSIS
        bm2h.sh [-h|--help] [-v|--version] [OPTIONS <arg>] [src] [[src] [dest]]

DESCRIPTION
        Batch unpack and convert manpages to html from source manpage
        directory to a destination directory.

        bm2h.sh is designed to automate conversion, either by running it with
        or without command line arguments. If no arguments are given, and
        --automatic option is used, it will use the default values from
        bm2h.conf.

        Since this script checks if the destination files exist, new manpages
        can be accumulated by by re-running it with the same arguments or
        bm2h.conf settings. This means that you may use this as a kind of
        html formatted manpages farmer.

ARGUMENTS
        -h, --help                  Display this help and exit
        -V, --version               Display version and exit

        OPTIONS:

        -a, --automatic             Automatic mode using bm2h.conf settings
        -g, --generate-stub         Toggle generate stub html pages
                                    * Reverses bm2h.conf gen_stub setting
        -m, --m2h-opt <"options">   Quoted list of man2html options
                                    See man2html(1) for more information
                                    * Overrides bm2h.conf m2h_opt setting
        -p, --pretend               Do everything except creating directories
                                    and generating html
        -s, --skip                  Toggle skip/overwrite destination files
                                    * Reverses bm2h.conf skip setting
        -t, --html-type <type>      Choose destination file suffix
                                    * Overrides bm2h.conf html_type setting
        -v, --verbose               Toggle verbose mode
                                    * Reverses bm2h.conf verbose setting

        No arguments, source directory, or source and destination directory
        accepted

CONFIGURATION
        bm2h.conf is to be kept in the same directory as bm2h.sh

        - Change dst_root

          dst_root is the destination path if no, or one argument is given.

        - Change src_root

          src_root is the source path if no, or one argument is given.

          You only need to change this if your manpage directories are located
          somewhere else than /usr/share/man.

          When this path is set, the script expects man* directories to be
          found right under it unless the man_dirs setting is changed.

        - Optionally set m2h_opt

          Edit your custom man2html options with the m2h_opt setting.
          See man2html(1) for more information.

          Using the command line option -m|--m2h-opt will override the
          value set in bm2h.conf.

          Default: ""

        - Optionally set html_type

          With this setting you can change the file suffix of destination
          html files.

          Using the command line option -t|--html-type will override the
          value set in bm2h.conf.

          Default: "html"

        - Set the default verbose mode.

          If set to "0", only error messages will be displayed on STDERR. If set
          to "1" it will also show conversion progress on STDOUT.

          Using the command line option -v|--verbose will reverse the value set
          in bm2h.conf. If the value is set to "1", --verbose will assume the
          value to be "0" and vice versa.

          Default: "1"

        - Set the default skip mode.

          If set to "0", already existing destination files will be overwritten.
          If set to "1", already existing destination files will be skipped.

          Using the command line option -s|--skip will reverse the value set in
          bm2h.conf. If the value is set to "1", --skip will assume the
          value to be "0" and vice versa.

          Default: "1"

        - Set the default pretend mode.

          If set to "0", the script will work in normal mode.
          If set to "1", the script will do everything besides creating dirs
          and generating html.

          Using the command line option -p|--pretend will reverse the value set in
          bm2h.conf. If the value is set to "1", --pretend will assume the
          value to be "0" and vice versa.

          Default: "0"

        - Optionally set gen_stub

          This setting decides whether to generate stub manpages or not.

          If set to "0", no stub html files will be generated. Set this to "1"
          if you want to generate stubs.

          This is good if you want a fairly complete reference list over
          commands you have available to your disposal, or which ordinary
          manpages exist on your system.

          Using the command line option -g|--generate-stub will reverse the
          value set in bm2h.conf. If the value is set to "1", --generate-stub
          will assume the value to be "0" and vice versa.

          Default: "0"

        - man_dirs is used to expand man* directories under $src_root.

          There is no need to change this unless you want to batch convert
          manpages that are not present under /path/to/man/man*.
          See man(1) for more information.

          If you change this, make sure it begins with a /

          Default: "/man*"

        - comp_type should be left untouched for now.

          This was added as a stub if there would be systems with manpages
          that are not bz2 compressed. This script currently explicitly
          expects bz2 compressed manpages.

          Default: "bz2"

AUTHOR
        Written by Marcus Hoffren

REPORTING BUGS
        Report bm2h.sh bugs to marcus.hoffren@gmail.com
        Updates of bm2h.sh and other projects of mine can be found at
        https://github.com/rewtnull?tab=repositories

COPYRIGHT
        Copyright © 2013 Marcus Hoffren. License GPLv3+:
        GNU GPL version 3 or later - http://gnu.org/licenses/gpl.html

        This is free software: you are free to change and redistribute it.
        There is NO WARRANTY, to the extent permitted by law.

DEPENDENCIES
        - Fairly recent version of Bash. Tested with v4.1 only
        - GNU getopt. This might impose a problem on BSD/OSX systems which
          use another implementation of getopt. Installing GNU getopt on
          these systems should take care of it
        - bzcat, which is a part of the bzip2 package
        - man2html

        bm2h.sh has a built in sanity check and will exit if any of these
        conditions aren't met. An Exception is getopt, to which I've only had
        the chance to write a generic check since I haven't had the
        oportunity to install GNU getopt on a BSD/OSX system.

HISTORY
        LEGEND: [+] Add, [-] Remove, [*] Change, [!] Bugfix

        v0.1 (20130224) [+] Initial release
        v0.2 (20130225) [!] Fixed bug where destination path would break if
                            ${src_root} was changed
                        [*] Separated ${html_type} and ${comp_type}. For now,
                            comp_type shouldn't be touched since the script
                            relies on bzcat to explicitly unpack bz2
                            compressed manpages
        v0.3 (20130302) [+] Added arguments support
                        [*] Code cleanup/partial rewrite
                        [!] Fixed bug in bzcat syntax which generated the same
                            file multiple times
                        [+] Added to github
        v0.4 (20130304) [+] Added some sanity checks
                        [*] More code cleanup
                        [+] Added command line options support
                        [+] Added verbose mode. Command line option -v|--verbose
                            reverses the mh2m.conf verbose setting
                        [+] Added command line option -s|--generate-stub which
                            reverses the mh2m.conf gen_stub setting
        v0.5 (20130304) [+] Redirecting all errors to STDERR
                        [*] Use -a|--automatic with no arguments to explicitly
                            use bm2h.conf settings
                        [+] Added -p|--pretend mode
                        [+] Added -t|--html-type command line option
                        [+] Added -m|--m2h-opt command line option
        v0.6 (20130305) [*] Now asks if you want to create destination
                            directory if none is given. Which directory to be
                            created is decided by the dst_root setting
                        [*] Split convert() to slightly more generic functions
                        [+] Added -s|--skip command line option
                        [*] Changed short option -s for --generate-stub to -g
                            in order to use -s for the new -s|--skip option
        v0.7 (20130306) [!] Fixed bug where --pretend would still create
                            directories
                        [*] Huge code cleanup. Broken down even more functions
                            to smaller allround ones and emphatized each
                            function's accepted arguments

TODO
        - Update destination html's with newer versions/revisions
        - Change compression type
